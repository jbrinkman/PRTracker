DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'PRTracker.Web.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201501060056027_InitialCreate'
BEGIN
    CREATE TABLE [dbo].[Notifications] (
        [Id] [int] NOT NULL IDENTITY,
        [RawJson] [nvarchar](max),
        [ReceivedDate] [datetime] NOT NULL,
        [RepositoryId] [int],
        CONSTRAINT [PK_dbo.Notifications] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_RepositoryId] ON [dbo].[Notifications]([RepositoryId])
    CREATE TABLE [dbo].[Repositories] (
        [Id] [int] NOT NULL,
        [Name] [nvarchar](max),
        [Url] [nvarchar](max),
        CONSTRAINT [PK_dbo.Repositories] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[PullRequests] (
        [Id] [int] NOT NULL,
        [RepositoryId] [int] NOT NULL,
        [CreatedByUserId] [int],
        [Number] [int] NOT NULL,
        [Closed] [bit] NOT NULL,
        [ClosedDate] [datetime],
        [Merged] [bit] NOT NULL,
        [MergedDate] [datetime],
        [MergedByUserId] [int],
        CONSTRAINT [PK_dbo.PullRequests] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_RepositoryId] ON [dbo].[PullRequests]([RepositoryId])
    CREATE INDEX [IX_CreatedByUserId] ON [dbo].[PullRequests]([CreatedByUserId])
    CREATE INDEX [IX_MergedByUserId] ON [dbo].[PullRequests]([MergedByUserId])
    CREATE TABLE [dbo].[Users] (
        [Id] [int] NOT NULL,
        [Login] [nvarchar](max),
        [DnnLogin] [nvarchar](max),
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[RepositoryHistories] (
        [Id] [int] NOT NULL IDENTITY,
        [Forks] [int] NOT NULL,
        [Watchers] [int] NOT NULL,
        [CreatedDate] [datetime] NOT NULL,
        [RepositoryId] [int] NOT NULL,
        CONSTRAINT [PK_dbo.RepositoryHistories] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_RepositoryId] ON [dbo].[RepositoryHistories]([RepositoryId])
    ALTER TABLE [dbo].[Notifications] ADD CONSTRAINT [FK_dbo.Notifications_dbo.Repositories_RepositoryId] FOREIGN KEY ([RepositoryId]) REFERENCES [dbo].[Repositories] ([Id])
    ALTER TABLE [dbo].[PullRequests] ADD CONSTRAINT [FK_dbo.PullRequests_dbo.Users_CreatedByUserId] FOREIGN KEY ([CreatedByUserId]) REFERENCES [dbo].[Users] ([Id])
    ALTER TABLE [dbo].[PullRequests] ADD CONSTRAINT [FK_dbo.PullRequests_dbo.Users_MergedByUserId] FOREIGN KEY ([MergedByUserId]) REFERENCES [dbo].[Users] ([Id])
    ALTER TABLE [dbo].[PullRequests] ADD CONSTRAINT [FK_dbo.PullRequests_dbo.Repositories_RepositoryId] FOREIGN KEY ([RepositoryId]) REFERENCES [dbo].[Repositories] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[RepositoryHistories] ADD CONSTRAINT [FK_dbo.RepositoryHistories_dbo.Repositories_RepositoryId] FOREIGN KEY ([RepositoryId]) REFERENCES [dbo].[Repositories] ([Id]) ON DELETE CASCADE
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201501060056027_InitialCreate', N'PRTracker.Web.Migrations.Configuration',  0x1F8B0800000000000400ED5CDB6EDC36107D2FD07F10F4D416AED7765E5A633741B28E53B7B11D789DB66F0157A2D744246A2B51AE1745BFAC0FFDA4FE4247AB1B29921275D98B9320406053E470383C339CA18EFCDF3FFF8E5F3CFA9EF580C3880474621F1F1ED916A64EE012BA98D831BBFBFE07FBC5F3AFBF1ABF76FD47EBD7BCDFB3A41F8CA4D1C4BE676C793A1A45CE3DF65174E813270CA2E08E1D3A813F426E303A393AFA71747C3CC220C206599635BE8929233E5EFF02BF4E03EAE0258B917719B8D88BB27678325B4BB5AE908FA32572F0C47E43D84FF1FC5DEC7937F88F18472C3A3C430CD9D64B8F20506786BD3BDB4294060C3150F6F47D84672C0CE862B68406E4DDAE9618FADD212FC2D9224ECBEEA6EB393A49D6332A07E6A29C386281DF52E0F1B3CC40A3EAF04E66B60B0382095F83A9D92A59F5DA8C13FB2A60E48E3899F8EA84A7532F4C3A2B2D9D6ECF212FE1C092FB1D1448014025FF0EAC69ECB138C4138A631622EFC07A17CF3DE2FC8257B7C1474C271486F36A83E2F04C6880A67761B0C4215BDDE0BB6C3117AE6D8DC471A3EAC0621837265DE20565CF4E6CEB0A2647730F17A8E0CC31634188DF608A43C4B0FB0E3186439AC8C06BBB4AB357E6BA417FFE1C25764E2704248267D9D6257A7C8BE982DD4F6CF8D1B6CEC92376F3964C89F7948023C22016C6B8711EEC60F2805DF0059C4F96FC7C0B6EA6586093B065101158F84A325565E0157A208BB5A1B4226CEB067BEB2ED13D59A60E7A583EFEC08329024B84817F13788208B1CF875B142E3003C582868EB3200E9DCA6AC7A3D2216ADD845F41172729C77FA62E7215D046A425FF6FDC37DE87DEF07368915FC1F3D0E0CF31DD08FEDC4B4CF5E6D1A9549BEBF081778E5269750FC95F35DD54DE6A16627E22E09E21C14DE64EFBAD34DAD7F5AB89398ACEBDE20E679D6E81876BFB1279B4F3D49C712D4FCB698893D95FAD20D30C9B0ECC6AB088FD390E7BCEEF05112EA67D15003E11ED28459D3ED48FBCC4E01ABDE74FA5749FDFCCFCDA60226C6263F8ABF4564740A19314B7F53DDB066E7EFD8D9A8B9DD58AF37D6AF5163AB655BB2143EC7CDAD429AC08E89D62746ABD2EC13919F9252A6BE7791B2CC8E68BA5334AB733D106D2DB0EF54B96A1F42D6332319F297A4D0BFEF320FC18F53BD07F43CCB9077B0E92966CFA42A04952FF1B821E59BBBE58AA49F14DBCED6514050E59EB2C2DA752D489E6784D5DCBB4C24BC386680C881FE0586409AE046A4DECA3C3C363C9E6069314F54C3989782F284EF39D340778240E139740DE1404828F13CA64F725D4214BE419AEB932DE300024DB54CC547D7286979826BE6B681113154477909529E6ACC4A9269B8D471CAEEAE1A6CF46755030484D4B2C08456813144CE650E02D4DA20CE0DC096A8DAA6C016B8D2637D1412A2F778E37A186308182BAA018146DCA526427605369B265ACA9EC6DA242B592DE39D2B873CF0404AA937F5094A92E044D4EE9E3AAF9C7D7F40C7B9861EBA593BE259CA2C841AE9C3F4102E20E8C5079155BC6A7BC4F4FE4D4AD4D4A9B73B0BA0C5505A3A2703347ABD925F6D3C0ACC95AB69A31EAF76F2FF19B962E3086C1081CCAF13579841F55AF19E004C8EE06A2EC12A20AB844F40C33F54BAFB26852D616127A456185A1D66F7424593C641B2489EFB42449C289D0202A39135532D2C4C27445FCABAA9A85158E5F91CB6DB44A78F57522D7BDE9D563158D2DEAD462B1D59D9320DEA22EE5845616558D35A24D0CEC5573912F1BCCB0CE6A596971AB13215A63B2E6DA8A939AA175505B89AF0EEA4DA52F11DA15097D0DA52C0B366C273E3ED55B49973CB44970FB5A48911E183A740733D55FEAD585ABA67CAB7DC6A55A251F9E8DA2574D92D5DF8AF9E563718217CFC6A3941899358C471A06E5F8122D97842E384665D662CD523AE5F4FB597B8AA19FCA183991826958685BCC040B470B5C790A5383A6E7248C58C2DF9CA3E4EE78EAFA523745BEA2396CF309552989BC99F9E19B8F4A7E4E476A28A6621223677C99A07358AC9F648FEB17099A734C1E6E256457E4A150F1EE621A78B14FF5C9AC7E74413FE445148D2DE408F4424198F0A48D443E1B1625D6E5C909DA2B969632696973A5F244448C119E04271E024EFA506600A6BAC19B8152FA2E931F9FB6984B58F3F07801EB86BDD960E1F81C6283F9F2A2FD0ED78EDE50B4E8EC933A89D2E5352FB4F1665B2F37E74D0970CCDA5A689731A704A5B2B6B652E4C8C8B79B4BCBD954BCA4BCADAD145927BEBDAD34F52636DD19EFCC9DD3D47E083F561531060EAC1EB619CFCDE82CBC80ACC95C46C98AE1C594AD9B382A767D967309FFB0477A7E83D3E764D7CAD80C8632E60A2F206B32975152577831656BEB93431156F9074F3EDF946ABC6A9762F6A2D6ABD474E3ACBE6AFE744E2AB8D22EB605A67A206E526CCD5611C37E0AE6D91FDED423B0DEB2C325A2E40EE09E52B8EC93A3E393CA8777FBF311DC288A5C4F519FEABE8413F76C0B5C349258B6916DD696A9257E6F461F50E8DCA3F01B1F3D7ECB0BEBFA4D990B3FB3A128646B0B48EF1E2EA88B1F27F65FEB81A7D6C5EF1FF8B107D67508483CB58EACBFEB17D4E54BAFDD80A0A529795669AF0DE63E8C6A21A7D3972C4FC2B09BC6689FCF494CF5A80C37771705CE848F53BA1854FC34654EBA4A688A4026AB113F53E9A28BFC894A3F5DBA6EB1387A03015141ECDA538F1568FCBD6261F59B805EC23A46E81EDCFE4F237B11C8F35DF050A5CE770A5A32717E6FB31E85125BA1AC0FC34E175921BBA2A26F8343D4F0EA680FC8424350CC53664017D6ADF2DD7477F666274468AEF936C984FC9409E05FC0B009303C458A76EB636350EAE93EA069BB874D5B4CEDC159D39358BD5B5C29789BFDE8DC4F0063266F3AF600696A0AB4CC3CAA6EAD9EDDDC486E4E2FD5A16698078083344DAFA7B0EAD9C20DEC67D554B55CB31A7E74133D5A35571DE15049A0D6F2A755D2D5DCCC266A75BDCD8A3EB5A6D3D30077CCC0D6B0166BC98A2AF0CA7CB42740ABE60154BE6037E4B9EA88B2FBCF917E0ACB1E98F2DC0FF0DB59FED6A9CC5D4CA10D8E1AA6C146B8C9F2FB6938D0B93F000BB9454416A588E4CFC152EC084779D1E782DE05795E51D128EF22DDB533E4C239FF328470871C068F1D1C45EBBFC5F22BF262E8F2DA9F63F7825EC76C19335832F6E79E608C2433A99B7F4DC016751E5F2FD7717D8825809A24B982BCA6AF62E2B985DEE78ADB3F8D8824E5C92E6A93BD64C985ED62554892FF368F4E5066BE2253BBC5FED20361D1359DA107DC453708686FF10239AB9C66A017D2BC11A2D9C767042D42E447998C723CFC0A1876FDC7E7FF03157C545707590000 , N'6.1.2-31219')
END

IF @CurrentMigration < '201501102253130_ProcessedFlag'
BEGIN
    ALTER TABLE [dbo].[Notifications] ADD [Processed] [bit]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201501102253130_ProcessedFlag', N'PRTracker.Web.Migrations.Configuration',  0x1F8B0800000000000400ED5CCD6EDC3610BE17E83B083AB545B2B29D4B6BECB648D671EB36B603AFD3F61670257A4D44A2B612E57A51F4C97AE823F5153A5AFD91222951D2FE3909020436450E87C38FC319F2A3FFFBE7DFF10F8F816F3DE02826219DD8C7A323DBC2D40D3D4217133B6177CFBFB57FF8FECB2FC6AFBDE0D1FAB5A8F722AD072D693CB1EF195B9E3A4EECDEE300C5A380B8511887776CE4868183BCD039393AFACE393E763088B04196658D6F12CA4880D7BFC0AFD390BA78C912E45F861EF6E3BC1CBECCD652AD2B14E078895C3CB1DFDEDC46C8FD80A3D16F783E3A430CD9D64B9F20D06486FD3BDB4294860C31D0F3F45D8C672C0AE962B68402E4DFAE9618EADD213FC6B9FEA75575D3A11C9DA44371AA86852837895918741478FC22B78D536FDECBC276693BB0DE6BB0325BA5A35E5B70625F858CDC1137175FEFF074EA4769E5BA91B34919F18D9F5942956725340041E9BF67D634F15912E109C5098B900F0D92B94FDC5FF0EA36FC80E98426BECF2B0BEAC237A1008ADE46E112476C7583EFF2215C78B6E588ED9C7AC3B219D7261BD805652F4E6CEB0A3A47731F9758E08C306361847FC414478861EF2D620C47349581D7D6947AAFF57583FEFC394EAD9B7508F883A5645B97E8F10DA60B763FB1E147DB3A278FD82B4A7225DE51022B0F1AB128C1ADFD60179307ECC10AC04567E9CFB7B0AE14036C13B60C6302035F49A66A6E08BFBA388E71D9EA5518FA1851A9DD157A208BB581B55DDBD60DF6D755E27BB2CC96F3A8FAFC9EC75F0C168CC2E026F40511629DF7B7285A6006AA852D15676112B9352B8D9D6AF9342E2A7E041D9754D5F4D35B5057216DC565FAFFD657D2BBC8DF7C1F5ABCD750BC69C817486E857CB1364CF57E0B337C83FF4870CCD46A7315DEF34BA2525A5D435AA59A6AAA356AE6587E22B0282382DBCC9DD55B69B46FAAD7E069149507791BCE3A9DDD0DD7F6B3BF51F5D3B00F76DC51A7114E7B7FB5821834EAB8A95E25C11C4703FBF743D5AEDC4B8A3AC4686E798961410CEE3F93D2BF7F33F36B5D883089AD4EAF565BEDF7844A92B7D6D7ECEAAEF9F1B76A2E56562BCED769D45BA8D855ED9668B0F71ED3A4B0C28DF7F2CC99F53ABAE4B4D1675FACEAE74DB820DB4FA3CE28DD4D475B08657B64287934322051C9257C7A98353D00380FA30FF1B0CDFB37C4DC7BB0E74642906D1F10B4491A9EF90F88CBF5E95043106FB2C65EC671E892B5CED2706A699B688ED7D4B34C73B8CC5988C600AF010B8B2C6129815A13FB68343A966C6ED04999B1549D88A7836237DF487DC08AC451BA24903F0581B0C60965F2F225D4254BE41B8EB9D6DED001A4D354F654FF72869798A66BD7D022262A88CB4156A6ECB3E6A7DA6C3676385C35C34D1F79EAA0601086565810D2CC362898F4A1C05B163019C0B917D45A55D901D65A4D6EA283944AEE1D6F42BE60020575F2B051B429D38EBD804DA5C98EB1A6B2B7890AF5AC79EF48E3F63D1310A876FE8DA24C75E467B24B1FD7CD3FBEA667D8C70C5B2FDDECAE708A62177972FC040188B76184CAA3D8313EE5797A22BB6E6350DA1E833545A82A1895E99A395ACD8EA99F06664DC6B2D388513F7F0789DF2C7581360C5AE048F6AFE927FCA8BA48801D203F1188F3A3873AE052D133CCD4D75A55D2A4CC2D24F48AC24A43ADEF6C24593C645B2489B75692246147681195EE892A195960613A22FE32AA6160E5C2AFC9E5265A25BC7E61C8556FBB5CACA3B1439E5A0EB63E7312C43BE4A59CD0DAA0EABE46B48981BD1A0EED658319E6591D332D6E7422441B4CD69E5B715273B46ED456E23541B3A9F42942B72461A8A19469C196EDC4FBA7662BE982872E01EE500B29C203C305DDC34CCD877A4DEEAA2DDEEA1E71A946C9BB6723EFD510640DB76271F858EEE0E5B7B1933123F382B1A3A1508E2FD17249E882A354E625D62CE3534E9FCFBA130D834C86E3C60ABE61A96DD9130C1C2D70ED2B740D9A9E932866298B738ED2B3E3A91748D514F18A66B32D3A548524F264169B6FD12AFD395FCC12C7548C5FE4602F97710EE30CD2C0717D87A0D9C2E4E6564A74453E8A14D716D3D04F02AA8F63F5AD4B26222FA22CEC2047601A0AC2842F5D24F281B028B12944D64BE47888BC38AE589635766AB32605E41246A42C47049E112C055F3010957A676880C9A6C6DB41647607CAB7CF4ACC25ACB97ABC8075C1C1CCADB0010F9C5B3E37E93EB98DADB7E46F36BEAAA5936F5E68EBB1B85E6E41B01290989775D02EA758094AE5655DA5C8BE952F379756D0AE784945595729B24E7C795769EA496C3B70DEDB4ACEF282814B5895FC18AC5D75B3ED2CDA9CFCC20BC88BCC65541C1A5E4C55BA8D0D62DF9B3797286C6C0F2F0E7D866CE55A19DB814F4E76E105E445E6322AB60B2FA62AEDBC5F289C29FF61173BDA56E129A585F52A65EF657A584B03C7794AD6FEDC4ECAD1B22AB605A67A205E9A9FCD5631C34106E6D91FFED42730DEAAC225A2E40EC2908CF5659F1C1D9FD45EEC1DCEEB39278E3D5F91D2EA9ED08973B603FA1A492DDB4A50EB4AEE129FACD10714B9F728FA2A408F5FF3C2FA3E4BF3E067B629D6D9DA02D275C505F5F0E3C4FE6BDDF0D4BAF8FD3DDFF699751D01124FAD23EBEFAE03925EB8CD096B96D1E7E1D87E80D4713A780AEB2090702FAE3AC8E9F544E6491876DB381FF262C5548F5AF3214B4E7CFFD2C7A0E2EB97DA8AEDF9F245E5C54C4623BE84E9A38BFC0A66982E7DA7586C6D3EC3DD5E503C89152BBC1918E40BEB0F100609EBE9A1073C24F838222081B3DF070F75C67E2FA725F3F50F36725228B113A6FC6648F12219655F0CF85D50975AAEAD0E80A3B409667B4648E843F6555E89F7278DF64284E694709B04CC8F9977FE190CDB00C353648677DE3636CA783D0434ED76B3E98AA903D86B06F2B9F78B2B055D74188BFC0960CCE4B6E40090A6665ECB84A7FAD4EA49D5AD9CEAEC601E7286790838C8C2F466E6AC9EA4DC42BA5675D548716BA065B7B1B2557D35F11C95BC6D2D6D5B255D4D096D637437DBACACD3683A3DFB70CFC46F0D59B29123A902AFCC857B026C6E1E40D5FDBC21BD56C7CF3D7C6AF65318F68699D6C300BF9BE1EF9C41DDC7145AE7A8612B6C85122DDF71C386CEFDE159882D62B2A844A47F86966257D8CACB3A17F42E2CE28A9A464515E9AC9D210FF6F99711B83BE4B2FC2271FD875F7E457E02555E0773EC5DD0EB842D130643C6C1DC178C9146264DFDAF79DFA2CEE3EBE5DAAF6F6208A026498F20AFE9AB84F85EA9F7B9E2F44F23220D79F283DA742E597A60BB589592E43F04A413949BAF8CD46E71B0F441587C4D67E801F7D10D1CDA1BBC40EEAAA02AE885B44F8468F6F119418B0805712EA36A0FBF0286BDE0F1FBFF01217D7FCE7F590000 , N'6.1.2-31219')
END

IF @CurrentMigration < '201501140310326_PullRequestDates'
BEGIN
    ALTER TABLE [dbo].[PullRequests] ADD [CreatedDate] [datetime]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201501140310326_PullRequestDates', N'PRTracker.Web.Migrations.Configuration',  0x1F8B0800000000000400ED5CCD6EDC3610BE17E83B083AB545B2B29D4B6BECB648D671EB36B603AFD3F61670257A4D44A2B612E57A51F4C97AE823F5153A5AFD91222951D2FE3909020436450E87C38FC319F2A3FFFBE7DFF10F8F816F3DE02826219DD8C7A323DBC2D40D3D4217133B6177CFBFB57FF8FECB2FC6AFBDE0D1FAB5A8F722AD072D693CB1EF195B9E3A4EECDEE300C5A380B8511887776CE4868183BCD039393AFACE393E763088B04196658D6F12CA4880D7BFC0AFD390BA78C912E45F861EF6E3BC1CBECCD652AD2B14E078895C3CB1DFDEDC46C8FD80A3D16F783E3A430CD9D64B9F20D06486FD3BDB4294860C31D0F3F45D8C672C0AE962B68402E4DFAE9618EADD213FC6B9FEA75575D3A11C9DA44371AA86852837895918741478FC22B78D536FDECBC276693BB0DE6BB0325BA5A35E5B70625F858CDC1137175FEFF074EA4769E5BA91B34919F18D9F5942956725340041E9BF67D634F15912E109C5098B900F0D92B94FDC5FF0EA36FC80E98426BECF2B0BEAC237A1008ADE46E112476C7583EFF2215C78B6E588ED9C7AC3B219D7261BD805652F4E6CEB0A3A47731F9758E08C306361847FC414478861EF2D620C47349581D7D6947AAFF57583FEFC394EAD9B7508F883A5645B97E8F10DA60B763FB1E147DB3A278FD82B4A7225DE51022B0F1AB128C1ADFD60179307ECC10AC04567E9CFB7B0AE14036C13B60C6302035F49A66A6E08BFBA388E71D9EA5518FA1851A9DD157A208BB581B55DDBD60DF6D755E27BB2CC96F3A8FAFC9EC75F0C168CC2E026F40511629DF7B7285A6006AA852D15676112B9352B8D9D6AF9342E2A7E041D9754D5F4D35B5057216DC565FAFFD657D2BBC8DF7C1F5ABCD750BC69C817486E857CB1364CF57E0B337C83FF4870CCD46A7315DEF34BA2525A5D435AA59A6AAA356AE6587E22B0282382DBCC9DD55B69B46FAAD7E069149507791BCE3A9DDD0DD7F6B3BF51F5D3B00F76DC51A7114E7B57EFCE464D5FAD207C8D3AEEC7574930C7D140D5FD50B5A1F792D267FC9718D6D2E0FE3329FDFB3733BFD6FB0893D8EA2F6BB5D52E53A824397A7DCDAE9E9E1F7FABE66265B5E27C9D46BD858A5DD56E09247B6F4F4D0A2B76805E4E3DB35E476F9E36FAECC655FDBC091764FB19D819A5BBE9680B51708FE4260F6406E438B9844F0FB3A66707E761F4211EB679FF86987B0FF6DC62F4B2B9B3853649C30F0D0684F4FA4CAA21FE3759632FE33874C95A676938B58C4F34C76BEA59A6E95FE62C446380D780854596B09440AD897D341A1D4B3637E8A44C76AA4EC48345B19B6FA43E6045E2285D12C89F824058E3843279F912EA9225F20DC75C6B6FE800D2692A7BAA7F39C34B4CD3B56B68111315C4E5202B53F659F3536D361B3B1CAE9AE1A68F3C75503008432B2C08196A1B144CFA50E02D0B980CE0DC0B6AADAAEC006BAD2637D1414A25F78E37215F3081823A79D828DA9469C75EC0A6D264C75853D9DB44857AD6BC77A471FB9E0908543BFF4651A63A2D34D9A58FEBE61F5FD333EC6386AD976E76CD3845B18B3C397E8200C4DB3042E551EC189FF23C3D915DB731286D8FC19A2254158CCA74CD1CAD6627DC4F03B32663D969C4A89FBF83C46F96BA401B062D7024FBD7F4137E54DD41C00E909F08C4F9D1431D70A9E81966EA1BB12A6952E616127A4561A5A1D6D73D922C1EB22D92C40B2F4992B023B4884AF744958C2CB0301D117F8FD530B072E1D7E47213AD125EBF6BE4AAB7DD4BD6D1D8214F2D075B9F3909E21DF2524E686D50755F23DAC4C05E0D87F6B2C10CF3AC8E9916373A11A20D266BCFAD38A9395A376A2BF19AA0D954FA14A15B9230D450CAB460CB76E2FD53B39574C143970077A88514E181E182EE61A6E643BD2677D5166F758FB854A3E4DDB391F76A08B2865BB1387C2C77F0F2DBD8C9489579C1D8D1B02FC79768B92474C1B131F3126B965131A7CF67DD398A4126C371630555B1D4B6EC09068E16B8F615BA064DCF4914B394003A47E9D9F1D40BA46A8A7845B3D9161DAA421279328BCDB76895FE9C2F66899E2AC62F72B097CB3887710669E0B8BE43D06C6172732BE5C8221F458A6B8B69E82701D5C7B1FAD625899117511676902390140561C2972E12F9405894D81422EB257214465E1C572CCB1A3BB559930272092352962302CF0896822F18884ABD3334C06453E3ED2032BB03E5DB6725E612D6343F5EC0BAE060E656D88007CE2D9F9B749FDCC6D65BF2371B5FD5C20D262F50F8D0595E75BEA990A93FFCD4CB2D085B02B2F3B20EDAE5942D41A9BCACAB1485C9B8727369058D8B975494759522EBC4977795A69EC4B603ECBD79862CCF18E81254C994812F5037DB8E13C8C934BC80BCC85C46C5C9E1C554A5DBD870F61D0C7089C7C66282E210694868A095B11DF8E4E4195E405E642EA362CFF062AAD2FDED3FFD77C8ADC2534A33EB55CADECB74B396568EF314AFFDE59F94F365556C0B4CF540BC34DF9BAD6286830CCCB33FFCA94F60BC55854B44C91D8435198BCC3E393A3EA93D1E3C9C877C4E1C7BBE2245D6BDE613E76C077438925AB695F0D6952C26BE9EA30F2872EF51F455801EBFE685F57D21E7C1CF6C532CB6B505A4EB8F0BEAE1C789FDD7BAE1A975F1FB7BBEED33EB3A02249E5A47D6DF5D07243DB69B13D62CA3CF1BB6FD00A9E374F094D84120E11E7F7590D3EBB5CE9330ECB671DE977EAA5AB826F3AB794C633AA45AF321AB577C9AD3676EC48739B5C5DFF3514E5FBB8A8F74FAE8223FD019A64BDF29165B9BCF70B7C71D4F62F10BCF1906B9D5FADB8841C27A3AFB016F1C3E8E604A784ED0070FF5C704BD9C96992F3FD4CD692724FECDF0F5459ECCBEC8F9BB6055B5DCA81D007D6A13A4FB8C2BD18787ACBCADEFCF67ED8508CD81E336B9A11F3325FE3318B60186A7485AEFBC6D6C948C7B0868DAED66D3155307B0D70CA49AEF17570A26EB3082FB13C098C9C5CB01204D4D0A97B958F5A9D5F3BD5BE9DED9193FE40CF310709085E9CDA45E3D7FBA850FAEEAAA917DD7C0186F238CABFA6AA2602A29E55A46B94ABA9AADDA46366FB65959A7D1747A62E49E39E91A1E67237D53055E99A6F70488E63C80AAAB7E43E6AF8E3A7CF8ACF1A730EC0D93C087017E37C3DF39B9BB8F29B4CE51437CD80A5B5BBE2E870D9DFB73BA105BC464518948FFB82EC5AEB09597752EE85D58C415358D8A2AD2593B431EECF32F237077C865F99DE4FA6FD2FC8AFC04AABC0EE6D8BBA0D7095B260C868C83B92F18238D4C9AFA5F53D2459DC7D7CBB55FDFC410404D921E415ED35709F1BD52EF73C5E99F46441AF2E407B5E95CB2F4C076B12A25C97FA3482728375F19A9DDE260E983B0F89ACED003EEA31B38B4377881DC55C17AD00B699F08D1ECE3338216110AE25C46D51E7E050C7BC1E3F7FF0361E1AF01555A0000 , N'6.1.2-31219')
END

IF @CurrentMigration < '201506182155199_UserIsEmployee'
BEGIN
    ALTER TABLE [dbo].[Users] ADD [IsEmployee] [bit] NOT NULL DEFAULT 0
    ALTER TABLE [dbo].[Users] ADD [DnnUserId] [int] NOT NULL DEFAULT 0
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201506182155199_UserIsEmployee', N'PRTracker.Web.Migrations.Configuration',  0x1F8B0800000000000400ED5CDD6EE4B615BE2F90771074D5149B91EDBD698D9904BB63BB75BAB6171E6FD2BB0547A2C7C44A942251AE07459FAC177DA4BC428E467FA4484A94347F4E160B2C6C8A3C3C3CFC78780EF9D1BFFEEFFFD31F5E02DF7AC67142423AB34F2727B685A91B7A84AE6676CA1EBFFBABFDC3F7DFFC697AE9052FD64F65BDB7593D68499399FDC45874EE3889FB8403944C02E2C661123EB2891B060EF242E7ECE4E46FCEE9A98341840DB22C6B7A9F524602BCF9057E9D87D4C5114B917F137AD84F8A72F8B2D848B56E51809308B978667FBC7F8891FB05C7939FF172728118B2AD773E41A0C902FB8FB685280D1962A0E7F9A7042F581CD2D5228202E43FAC230CF51E919FE042FFF3BABAE9504ECEB2A13875C352949B262C0C7A0A3C7D5BD8C669361F6461BBB21D58EF12ACCCD6D9A837169CD9B721238FC42DC4373B3C9FFB7156B969E47C52267CE3379650E54D050D4050F6EF8D354F7D96C6784671CA62E4438374E913F79F78FD107EC1744653DFE7950575E19B5000451FE330C2315BDFE3C76208D79E6D39623BA7D9B06AC6B5C907764DD9DB33DBBA85CED1D2C7151638232C5818E3BF638A63C4B0F7113186639AC9C01B6B4ABD37FABA47FFFE31C9AC9B7708F883A5645B37E8E503A62BF634B3E147DBBA222FD82B4B0A253E51022B0F1AB138C59DFD60179367ECC10AC06567D9CF0FB0AE1403EC121685098181AF2553B537845F5D9C24B86AF53E0C7D8CA8D4EE163D93D5C6C0DAAE6DEB1EFB9B2AC91389F2E53CA93F7FE6F1978005E330B80F7D418458E7F3038A5798816A6147C54598C66EC34A53A75E3EAD8B8A1F41CF255537FDE32DA8DB9076E232FB7FE72BE953EC6FBF0F2DDE1B28DE36E44B247742BE5C1BA67A7F8419BEC7BFA438616AB5B90A9FF925512BADAE21AD524D35D51A35732CFF20B0286382BBCC9DD75B6BB46FABD7E269149547791BCE3ABDDD0DD7F6ABBF51F5D3B20FF6DC51E731CE7A57EFCE464DDFAF217C8D7BEEC7B769B0C4F148D5FD50B5A10F923264FC3718D6D2E8FE7329C3FB3733BFD6FB0893D8E92F1BB5D52E53A824397A7DCDBE9E9E1F7FA7E66265B5E27C9D56BD858A7DD5EE0824076F4F6D0A2B7680414E3DB75E4F6F9E35FAEAC655FD7C085764F719D805A5FBE9682F51F0757219447EB8C678ACE705BB285D67AB9801D95611598D48BA0A097FBC45647A987115C65F9271D1C4CF88B94F60CF1D8653DB3BECE89234FE1463448EA14FED5A12129335F62E4942976C749686D3484145735C52CF32CD4773EF251A03DC182C2C12C15202B566F6C964722AD9DCA0932AFBAA3B114F3AC56EFE22F5012B12C7D99240FE1C04C21A2794C9CB97509744C8371C73A3BDA103C8A6A9EAA9F9E5024798666BD7D022262A88CB4156A6EAB3E1A7BA6C3675385CB5C34D1F0AEBA0601017D7581052E62E2898F4A1C05B1EC119C07910D43A55D903D63A4D6EA28394DB1E1C6F42026302057536B355B429F3A083804DA5C99EB1A6B2B7890ACD34FEE048E3F63D1310A876FEADA24C757C69B24B9F36CD3FBDA317D8C70C5BEFDCFCDE738E12177972FC040188B76584CAA3D8333EE5797A25BB6E6B50DA1D83B545A82A1855E99A395ACD8EDC5F07664DC6B2D788513F7F4789DF3C7581360C5AE058F6AFD927FCA2BA14811DA03811488AB39026E032D10BCCD4577475D2A4CC2D24F48AC22A436DEE9F24593C643B2489377092246147E81095ED892A197960613A22FE62AD6560D5C26FC8E5265A25BC79F9C955EFBA286DA2B1479E5A0DB6397312C47BE4A59CD0C6A09ABE46B48981BD5A6E11648319E6593D332D6E7422445B4CD69D5B71520BB46ED556E2BD45BBA9F42942BF2461ACA19469C18EEDC4FBA7762BE982873E01EE580B29C203C3053DC04CED877A6DEEAA2BDEEA1F71A946C9BB6723EFD512648DB76279F858EDE0D5B7A993B33C8B82A9A3A1834E6F501411BAE2E8A14589B5C8B9A1F3EF16FD4993412EC371130577B2D2B6EA09068E56B8F115BA064DAF489CB08C91BA44D9D9F1DC0BA46A8A7845B3D9961DAA42127932CBCDB76C95FD5C2C66892F2BC62F72B057C8B882710659E0B8B943D06C6172732B23ED221FC58A6B8B79E8A701D5C7B1FAD615AB92175115F69023B0260561C2973E12F9405894D81622EB25729C4A5E1C572CCB9A3A8D59930272092352962302CF0896822F18894ABD3334C0645BE3DD2032BF94E5DBE725E61236BC435EC0A6E068E656D88047CE2D9F9BF49FDCD6D63BF2375B5FD5C20D262F50F8D05B5E7DBEA990A93FFCD4CB2D196402B28BB21EDA151C3241A9A2ACAF1485C9B872736925AF8C975496F59522EBC497F795A69EC4AE03EC8379863CCF18E91254C994812F5037DB8D1328D83DBC80A2C85C464D12E2C5D4A5FBDC70788A8F6015AEBCD7C854A8E58A8F06B0AA94686BD14A79BC352668D1CAD80DB00B5A0F2FA028329751F37A783175E9E176C6E17BF74EE12925C0CD2A55EF5522DC4878A745F2D9FD4852CA46F32AB605A67A265E96892ED609C3410EE6C52FFEDC2730DEBAC20DA2E41102AE9CDF669F9D9C9E35DE591ECF9B4727493C5F91BCEB1E3E8A73B607A21EC92CDB49C5EB4B63131F1AD26714BB4F28FE73805EBEE5850D7D4CE8C1CF6C5BFCBA8D05A48B996BEAE19799FD9F4DC373EBFA5F9FF9B66FACBB1890786E9D58FFED3B20E95DE292B07619439EFB1D06483DA783670F8F0209F74EAE879C410F9B5E8561778DF3A1C458D5C235995FCDBB23D321359A8F59BDE22BA6217323BE616A2CFE81EF9786DA557CCF344417F92DD3385D864EB1D8DA7C86FBBD8379158B5F78F931CAAD369F918C12B635672F3F0719025CE92948B7A9473C04F97DC475C29B8B21D06CBEB818E43FCDB69563DD27F7F2D2613B8F1A4432D1A15E30EC837AD671ED78041CB36DBC4CC8092543C8DA4A4AC370D2EF2044684E657749A0FD3DBF1BF80A865D80E13532FB7B6F1B5B652C1F039AF6BBD9F4C5D411EC3523F9F887C59582EE3BEE15C02BC098C91DD011204DCD9C97096BCDA9D593E23B39F1F97503E40CCB10709087E9EDCC673DC9BC8334AFEAAA95A2D842ABEF62D5ABFA6AE3A92A79F75ADABD4ABA9AD2DBC5C86FB75955A7D5747AF6E88189FB1AB26B2BC755055E99CBF80AD8F83C806A3E84213D5AC7AF3E7E6AFD6B18F69699F2E300BF9FE1EF9D013FC4145AE7A8E160EC84D22EDFDCC386CEFD1164882D12B2AA45647F12996257D8CAAB3AD7F4312CE38A86466515E9D89F210FF6F97731B83BE4B2E27A74F397847E427E0A552E8325F6AEE95DCAA294C19071B0F405636491495BFF1BDEBEA8F3F42EDAF8F56D0C01D424D911E41D7D9F12DFABF4BE529CFE694464214F71509BCD25CB0E6C57EB4A92FC97A574820AF35591DA030E221F84257774819EF110DDC0A17DC02BE4AE4B02865E48F74488669F5E10B48A51901432EAF6F02B60D80B5EBEFF0D4BA639A10B5C0000 , N'6.1.2-31219')
END

IF @CurrentMigration < '201506182204394_Milestone'
BEGIN
    ALTER TABLE [dbo].[PullRequests] ADD [Milestone] [nvarchar](max)
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201506182204394_Milestone', N'PRTracker.Web.Migrations.Configuration',  0x1F8B0800000000000400ED5C5F6FDC36127F3FA0DF41D0D3F590AC6CE7E56AECB648D676EB5E6C075EA7BDB7802BD16B2212B595289F17877EB23EF423F52B74F49F1449899276D7EB360810D814391C0E7FC3992167FCC76FBF4FBF7B0A7CEB11473109E9CC3E9E1CD916A66EE811BA9AD909BB7FFD6FFBBB6FBFFAC7F4DC0B9EAC9FCA7E6FD27E3092C633FB81B1F5A9E3C4EE030E503C09881B857178CF266E1838C80B9D93A3A36F9CE3630703091B6859D6F436A18C0438FB057E9D87D4C56B9620FF2AF4B01F17EDF0659151B5AE5180E33572F1CCFE707B1721F7338E263FE3E5E40C31645B6F7D82809305F6EF6D0B511A32C480CFD38F315EB028A4ABC51A1A907FB75963E8778FFC1817FC9FD6DD4D977274922EC5A90796A4DC246661D093E0F19B42364E73F82009DB95EC407AE72065B649579D4970665F878CDC13B720DF9CF074EE4769E7A690F34D99F0835F5942975715340041E9BF57D63CF15912E119C5098B900F0392A54FDCFFE0CD5DF819D3194D7C9F6716D8856F4203347D88C2358ED8E616DF174BB8F46CCB11C739CD81D5306E4CBEB04BCADE9CD8D6354C8E963EAEB0C00961C1C2087F8F298E10C3DE07C4188E684A0367D294666FCC758BFEF7639C4A379F10F007AA645B57E8E93DA62BF630B3E147DBBA204FD82B5B0A263E52029A07835894E0CE79B08BC923F64003703959FAF31DE89562815DC4D6614C60E11B4954ED03E15717C731AE46BD0B431F232A8DBB468F649509583BB56DDD623FEB123F9075AECE93FAF3271E7F3148300A83DBD01748887D3EDDA1688519B01676745C8449E436A434756AF569552A7E053D55AA1EFAF753A8EB9076E232FD7FE79AF431F2B73F8716EF0D146F1BF225923B215FEA8629DF1F60876FF12F098E999A6DAEC3275E256AA6D53D242DD57453E9A8D9C1F20301A58C08EE1277DE6FA3E1BEAD5FCB49A3E83CEAB4E1A4D3FBB8E1C67E396F54F3B4D8C19E16751EE17476B575361AFA6E03EE6BD4D31E5F27C112472359F74395411F4465C8FAAF30E8D2E8F9732AC3E71F24FE2BE2836E6540DB9B4111E0D27932377AAB0F67A1936452F43DFBDA145ED29D9C8B9DD58CF37D5AF9163AF665BBC3651D6C08DB1856D89A41E623975E4FBB910EFA623054F3BC0F5764F7B1DE19A5FB99682FFEF6657C1EACFD7083F1D8331EE4A23CA45BC90C88EB0A1F6E44785750F8FB2991E9B5C945187D8EC7F92D3F23E63E803C77E8B86DEF5AA58BD2F8FB9211D18C3E886C097D4C74EC6D1C872EC9789696D3087645719C53CF328D7CF3D34B14061C63A058640DAA046CCDECA3C9E45892B9C124559C574F22DEA98AD3FC4B9A03341247A94A207F0E0441C70965B2FA12EA9235F20DD7DC186F7800A4DB54CDD4FC7286D798A6BA6B2811131644759099A9E66C9C535D329B3A1CAEDAE1A67785755030F08B6B2C08C17917144CE650E02DF7E00CE03C086A9DACEC016B9D2237E1418AA29F1D6F42006302057534B355B429E3A067019B8A933D634D256F13169A1706CF8E34CEEE99804065F9B78A32D545A989953E6E8A7F7A43CFB08F19B6DEBAF90BEB1CC52EF264FF091C106FCB089557B1677CCAFBF442AC6EAB53DAED83B579A82A1855E19A395ACD2EF75F06664DD6B2578F51BF7F0789DF3C7481310C46E0483E5FD34FF849F5FC0216A0B811888BBB9026E052D20BCCD48F8175D0A48C2D24F48AC42A41652F5D122D1EB21D94C4B73E899260113A48A536514523772C4C57C43FE1B52CAC52FC065D6EA355C49BCFAC5CF7AE27D9261A7BC4A9D5629B3B2741BC475CCA116D2CAA79D68832319057CB2B822C30C338AB67A4C5AD4E84688BC8BA632B8E6A81D6ADCA4A7CB76817953E44E817248C1594322CD8B19CF8F3A95D4A3AE7A18F833B56420AF7C050A10788A9FD52AFEDB8EAF2B7FA7B5CAA55F2C7B3D1E9D5E2648D976279F95859F0EADBD4C9F3498B86A9A3493C9D5EA1F59AD01597885AB4588B3C0B75FE7AD13F3D33C869386EACC8D2ACB8AD668285A3156E7C85A981D30B12C52CCD7D5DA2F4EE78EE05523785BFA231B6E5842A9744DECCD2F896A3D29F0B6596327345FF4576F60A1A17B0CE20751CB337048D0993875B697A30F251A478B698877E1250BD1FAB1F5DE56FF224AAC61E7484FC4C8198F0A50F45DE111629B6B9C87A8A5CF6264F8E6B96694D9DC6AE490EB9841129CA118167044BE12C18894AFD616880C9B6C1BB4164FE28CB8FCF5BCC2964198E3C81ACE160F65630C023F7968F4DFA6F6EEBE81D9D375BD76AE1059327287CE84DAFBEDF54D0D45F7EEAE996B96A02B28BB61EDC15D96A0253455B5F2A0A9171EDE6D4CA0C369E52D9D6978ACC13DFDE979A7A13BB2EB05BA8D6096F02C1BAF9604E993C661979BCA802338373453D6C37074A9129C413289ACC69D409473C99BA759FC68B4F1712A4C2B5F75A994A03B8E68301AC2ABCDA9AE7535E958D7180B4347603EC22458827503499D3A87384783275EBF359D9E17EC04EE12905D3CD2ED5EC5550DD089EA74520DB5DDA2945B67917DB02513D122F8D6A179B98E12007F3E2177FEE13586FDDE10A51720F9627CF95B34F8E8E4F1AD5A18753A9E9C4B1E72B2E0274E59AE29EED21E98FA492ED4CEBEB9B12279647D24714B90F28FA67809EBEE6890D2D81F4E067B6AD5CBD4C02D223CF25F5F0D3CCFE7F36F0D4BAFCEF277EEC2BEB2602249E5A47D6AF7D172455532E096BA731A448F17980D4733BF84CE45120E1AAFB7AD019548EF52204BB6B9C0F4DB25529AEC9FE6AAAA54C97D4183E467BC5DAAB217B23565E35947F60D5D550B98A55584378912BB0C6F132748BC5D16376582AEFDAC589A2480F3CD0A344A849197548370B5C4611DB9AE9900B5586A88154A4D22DEA11252A7F0D2F51A8061902CD662DC8A0D3D8CC481DAAD5DD4B0DC676CA2DC434A7E7AAADD847525CC783E80164BF6DA366224F75199246AE4CB6189E8E3C08119A3BDE5DA6F6FE952B1ABE8061176078893507BDCDC65673A90F014DFB35367D317500B66664A5C0F3E24A91883CAE3EE10560CCE445E90090A6CEE99753E99A5BAB4FD7EFCCD6CF1F2F206658868083DC4D6FCFC9D6A7BF77A4F3ABA66A4D9E6C49F8EFCAF757CDD59641ABAC08D01604A8A8AB938DBB6A05DA6556F569159D3EAFF5994B0A3469B8ADD9B72AF0CA59962FA04E8007509D5D6198B8ADCBFC3EFCA4FF97B0EC2DE7F08F03FC7E96BFF7DCFC21A2D01E8E9A8C8E9D24DBCB790060D0B93F040DBE454C563589F4CF4253EC0AA6BCEA7349EFC3D2AF68705476911E1118F2C0CEBF8DE0B8432E2B1E5BB3BF71F413F213E8721E2CB177496F12B64E182C19074B5F1046EA99B4CD9F5514883C4F6FD6D9B9BE8D25009B24BD82BCA1EF12E27B15DF178ADB3F0D89D4E5292E6AD3BD64E985ED6A535192FFE6958E5021BECA53BBC3C1DA0762F10D5DA0473C843738D0DEE3157237653A879E48F74688629F9E11B48A50101734EAF1F02B60D80B9EBEFD1364B47E8C0F5D0000 , N'6.1.2-31219')
END

